!function(e){var t={};function n(c){if(t[c])return t[c].exports;var o=t[c]={i:c,l:!1,exports:{}};return e[c].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(c,o,function(t){return e[t]}.bind(null,o));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var c=function(){document.addEventListener("click",(function(e){var t=e.target;if(t.matches(".call-btn, .discount-btn, .check-btn, .consultation-btn")){e.preventDefault();var n=t.classList[0].split("-")[0],c=document.querySelector(".popup-".concat(n)),o=c.querySelector(".popup-content"),l=c.querySelector(".capture-form"),r=c.querySelectorAll("input");r.forEach((function(e){e.getAttribute("required")||(e.required=!0)})),document.documentElement.clientWidth>768?(o.style.opacity=0,o.style.transition="1s",setTimeout((function(){o.style.opacity=1}),500),c.style.display="block"):c.style.display="block",c.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?(c.style.display="none",document.documentElement.clientWidth>768&&(o.style.opacity=0),l.reset(),r.forEach((function(e){e.removeAttribute("required")}))):(t=t.closest(".popup-content"))||(c.style.display="none",document.documentElement.clientWidth>768&&(o.style.opacity=0),l.reset(),r.forEach((function(e){e.removeAttribute("required")})))}))}}))},o=function(){var e=document.querySelector(".main-form"),t=document.querySelectorAll(".capture-form"),n=document.createElement("div");n.style.cssText="font-size: 14px; color: #333;";var c=function(e){var t=e.querySelector(".phone-user").value;if(e.appendChild(n),n.textContent="Загрузка...",/^(\+7)[0-9]{10}$/g.test(t)){var c=e.getAttribute("name");n.style.cssText="color: #333;";var l=new FormData(e),r={};if(l.forEach((function(e,t){r[t]=e})),"consultation_form"===c){var s=document.querySelector('input[name="user_quest"]').value;r.user_question=s}if("calculator_form"===c){var u=document.getElementById("myonoffswitch").checked,i=document.getElementById("myonoffswitch-two").checked,a=document.querySelector("#collapseFour input").value,d=document.querySelectorAll("#collapseTwo select"),f=(document.querySelectorAll("#collapseTwo .title-text")[1],document.getElementById("calc-result").value);r.type_septic=u?"Однокамерный":"Двухкамерный",r.check_bottom="Наличие днища: ".concat(i?"Да":"Нет"),r.first_septic_diameter=+d[0].options[d[0].selectedIndex].value.slice(0,-6),r.first_septic_rings=+d[1].options[d[1].selectedIndex].value.slice(0,-6),u||(r.second_septic_diameter=+d[2].options[d[2].selectedIndex].value.slice(0,-6),r.second_septic_rings=+d[3].options[d[3].selectedIndex].value.slice(0,-6)),a&&(r.meters=a),r.total=+f}o(r).then((function(t){var c=document.querySelector('input[name="user_quest"]'),o=document.querySelector(".consultation-btn");if(200!==t.status)throw new Error("status not 200!");n.textContent="Спасибо! Мы скоро с Вами свяжемся!",e.reset(),""!==c.value&&(c.value="",o.disabled=!0),setTimeout((function(){n.remove()}),3e3)})).catch((function(t){n.textContent="Что-то пошло не так...",e.reset(),console.log(t)}))}else n.style.cssText="color: red;",n.textContent="Введите правильный номер (н-р, +79999999999)"};e.addEventListener("submit",(function(t){t.preventDefault(),c(e)})),t.forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault(),c(e)}))}));var o=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},l=function(){var e=document.querySelectorAll(".phone-user"),t=document.querySelectorAll('input[name="user_name"]'),n=document.querySelector(".consultation-btn"),c=document.querySelector('input[name="user_quest"]');n.disabled=!0,e.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^\d+]/g,"")}))})),t.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-я\s]/gi,"")}))})),c.addEventListener("input",(function(e){""===e.target.value?n.disabled=!0:n.disabled=!1}))},r=function(){document.addEventListener("click",(function(e){var t=e.target;if(t.closest(".panel-group")){"A"===t.tagName&&e.preventDefault();var n="",c=(n=t.closest("#accordion")?document.getElementById("accordion"):document.getElementById("accordion-two")).querySelectorAll(".panel-heading"),o=n.querySelectorAll(".panel-collapse");(t=t.closest(".panel-heading"))&&c.forEach((function(e,n){e===t&&function(e){for(var t=0;t<o.length;t++)e===t?o[t].classList.add("in"):o[t].classList.remove("in")}(n)}))}}))},s=function(){var e=document.querySelector(".add-sentence-btn"),t=document.querySelectorAll(".sentence .row > div");e.addEventListener("click",(function(e){t.forEach((function(e){if(e.classList.length>3)for(var t=3;t<e.classList.length;t++)e.classList.remove(e.classList[t])})),e.target.classList.add("hidden")}))},u=function(){var e=document.getElementById("accordion"),t=document.getElementById("myonoffswitch"),n=document.getElementById("myonoffswitch-two"),c=(document.querySelector("#collapseFour input"),document.querySelectorAll("#collapseTwo select")),o=document.querySelectorAll("#collapseTwo .title-text")[1],l=document.getElementById("calc-result");o.classList.add("hidden"),c[2].closest(".select-box").classList.add("hidden"),c[3].closest(".select-box").classList.add("hidden"),e.addEventListener("click",(function(e){var t=e.target,n=t.closest(".construct-btn");if(t.closest(".construct-btn")&&!t.matches(".call-btn")){e.preventDefault();var c=n.closest("a").getAttribute("href");(t=t.closest(".panel")).querySelector(".panel-collapse").classList.remove("in"),document.querySelector(c).classList.add("in")}t.matches(".call-btn")&&document.querySelector(".popup-call .capture-form").setAttribute("name","calculator_form")}));e.addEventListener("change",(function(e){var r=e.target;(r.matches("select")||r.matches("input"))&&function e(r){var s,u=1e4,i=+c[0].options[c[0].selectedIndex].value.slice(0,-6),a=+c[1].options[c[1].selectedIndex].value.slice(0,-6),d=+c[2].options[c[2].selectedIndex].value.slice(0,-6),f=+c[3].options[c[3].selectedIndex].value.slice(0,-6);l.disabled=!1,t.checked?(o.classList.add("hidden"),c[2].closest(".select-box").classList.add("hidden"),c[3].closest(".select-box").classList.add("hidden")):(o.classList.remove("hidden"),c[2].closest(".select-box").classList.remove("hidden"),c[3].closest(".select-box").classList.remove("hidden")),2===i&&(u*=1.2),2===a&&(u*=1.3),3===a&&(u*=1.5),n.checked&&(u+=1e3),t.checked||(u+=15e3,2===d&&(u*=1.2),2===f&&(u*=1.3),3===f&&(u*=1.5),n.checked&&(u+=2e3)),s=Math.round(u);var m=r?0:+l.value,p=Math.round(+s/500);m<s?(l.value=m+p,setTimeout(e,1)):l.value=s}(!0)}))};(function(){document.querySelectorAll(".popup").forEach((function(e){var t=e.classList[0].split("-")[1];e.querySelector(".capture-form").setAttribute("name","".concat(t,"_form"))}))})(),c(),o(),l(),r(),s(),u()}]);